----------------------------------------------------------------------------------
--
-- Title: DBA.OracleCreatedUsers.sql
--
-- Description: SQL script to create a table of "ORACLE" Users that are not part
--                  of regular maintainance procedures like export, analyze, etc.
--
-- History:      31.03.2006  Obermeyer: created
--
----------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------
--
-- Subject:  Oracle Created Database Users: Password, Usage and Files References
-- Doc ID:  Note:160861.1 Type:  REFERENCE Last Revision Date:  09-DEC-2005
--
-- https://metalink.oracle.com/metalink/plsql/showdoc?db=NOT&id=160861.1&blackframe=1
--
----------------------------------------------------------------------------------------------
--
-- REFERENCE Last Revision Date:  20-JUN-2007
--
----------------------------------------------------------------------------------------------

DROP TABLE "ORACLE_CREATED_USERS";

CREATE TABLE "ORACLE_CREATED_USERS" (
"ID" NUMBER,
"USERNAME" VARCHAR2(32),
"INCLUDE" CHAR(3) DEFAULT 'NO',
"ANALYZE" CHAR(3) DEFAULT 'NO',
"EXPORT" CHAR(3) DEFAULT 'NO');

INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (0, 'UNKNOWN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (1, 'ANONYMOUS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (2, 'AURORA$JIS$UTILITY$');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (3, 'AURORA$ORB$UNAUTHENTICATED');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (4, 'CTXSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (5, 'DBSNMP');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (6, 'DIP');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (7, 'DMSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (8, 'MDDATA');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (9, 'EXFSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (10, 'HR');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (11, 'FLOWS_FILES');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (12, 'FLOWS_020100');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (13, 'LBACSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (14, 'MDSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (15, 'MGMT_VIEW');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (16, 'OAS_PUBLIC');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (17, 'ODM');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (18, 'ODM_MTR');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (19, 'OE');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (20, 'OLAPSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (21, 'ORDPLUGINS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (22, 'ORDSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (23, 'OSE$HTTP$ADMIN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (24, 'OUTLN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (25, 'PERFSTAT');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (26, 'PM');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (27, 'QS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (28, 'QS_ADM');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (29, 'QS_CB');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (30, 'QS_CBADM');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (31, 'QS_CS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (32, 'QS_ES');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (33, 'QS_OS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (34, 'QS_WS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (35, 'REPADMIN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (36, 'RMAN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (37, 'SCOTT');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (38, 'SH');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (39, 'SYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (40, 'SYSMAN');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (41, 'SYSTEM');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (42, 'TRACESVR');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (43, 'WEBSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (44, 'WKPROXY');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (45, 'WKSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (46, 'WMSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (47, 'XDB');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (48, 'SI_INFORMTN_SCHEMA');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (49, 'TSMSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (50, 'WKUSER');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (51, 'WK_TEST');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (52, 'DVSYS');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (53, 'DVF');
INSERT INTO "ORACLE_CREATED_USERS" ("ID", "USERNAME") VALUES (54, 'ORACLE_OCM');
COMMIT;


-- Oracle and Excluded Accounts
CREATE OR REPLACE VIEW "ORACLE_USERS" AS
SELECT username, account_status
FROM dba_users WHERE username IN (
SELECT UPPER(username) FROM "ORACLE_CREATED_USERS")
ORDER BY 2 DESC;

-- Oracle and Excluded Accounts
CREATE OR REPLACE VIEW "NON_ORACLE_USERS" AS
SELECT username, account_status
FROM dba_users WHERE username NOT IN (
SELECT username FROM "ORACLE_CREATED_USERS")
ORDER BY 2 DESC;

--DROP PUBLIC SYNONYM "ORACLE_USERS";
CREATE OR REPLACE PUBLIC SYNONYM "ORACLE_USERS" FOR "ORACLE_USERS";

--DROP PUBLIC SYNONYM "NON_ORACLE_USERS";
CREATE OR REPLACE PUBLIC SYNONYM "NON_ORACLE_USERS" FOR "NON_ORACLE_USERS";
